
## 前言
学习一个东西，本质上是要回答涉及该事物的若干问题。接下来会有一系列的文章，梳理一下微服务的相关的问题，从而达到更好的掌握微服务的目的。

## 问题列表

### 整体性的问题

#### 1. 什么是微服务架构

为了回答微服务框架的诞生，我们首先需要梳理一下框架整体的演进历史，这样才好理解为什么微服务框架会诞生，以及它解决哪些的问题。  
在程序开始的开始，最为常用的架构为单体架构。这个架构我相信每一个开发者都有接触过，因为它实际上就是一个无架构的模式，所有的服务都部署在同一个计算节点上。这样的架构很明显有一些优点和缺点。  

**优点:**
* 因为所有的服务都部署在一起，开发过程当中不用考虑分布式带来的各种问题，比如服务发现，服务通信，分布式事务等等困扰分布式架构很久的问题。
* 部署运营层面会额外的简单，所有的服务都部署在一个计算节点（通常是一台服务器），所以部署的层面的事情就额外的简单，只要看好这台机器基本上就不会出什么问题，或者说出了问题可以很快地进行修复。

**缺点:**
* 可提供的业务服务的规模有限，虽然摩尔定律统治了 IT 界很久，但是单台计算机的计算能力还是远远跟不上现实世界业务发展的需要。比如像 Google 这种企业，服务的人群规模都是数以亿级的范围。这种情况下，其实就算采购了性能最为强大的服务器，也没办法在一台服务器上支撑整个业务。
* 扩缩容困难，带来的结果就是计算收益率差。由于很多大型的服务，各个服务节点的计算能力需求不一样。比如服务 A 调用服务 B，这个时候可能由于 A、B 上业务的不同，导致 A 需要部署 3 台，B 需要部署 6 台。在单体架构里，如果不改变代码架构的情况下，你只能选择同时部署 6 台机器来解决该计算瓶颈的问题。很显然这样造成了很多资源上的浪费。

由于上述的原因，后来的架构慢慢将单体的服务拆开。比如在 21 世纪初的 SOA 架构（Service-Oriented Architecture）。该架构是微服务架构的前身。该架构的问题在于企图用复杂来对抗复杂。即指定了一系列的繁杂的标准，用来解决现实生活当中多样的业务请求。这样虽然可以很好地解决问题，但是无疑给开发者带来了巨大的心智负担。所以虽然在各大巨头的支撑下，经过数年的发展，最后还是偃旗息鼓了。

SOA 虽然倒了，但是也不可能回到单体的路上，毕竟现实中的痛点依然存在。此时微服务接过了大旗，其实刚开始时微服务一直被认为是 SOA 的变体。但是随着慢慢发展，发现微服务还是显著区别于 SOA 那套东西。最为重要的一点即微服务更为自由，没有繁杂的标准约束开发人员。比如来说在 SOA 中通信，你可能必须通过总线的方式。而微服务当中，你可以通过任意的方式进行，比如 gRPC，HTTP，Thrift 等等。总体上来说，SOA 把业务的复杂性留给了标准指定者，而微服务则把现实世界的复杂性留给了开发人员来处理。

#### 2. 怎么保证微服务架构的高可用

#### 3. 怎么判定服务是否健康？

#### 4. 如果服务不健康该怎么办？

#### 5. 怎么判定服务已经从不健康状态恢复过来了？

#### 6. 听说你用到了 Redis 作为缓存，如果你的 Redis 崩溃了会怎么样？

#### 7. 听你说你用到了 Kafka 作为消息队列，如果你的 Kafka 崩溃了怎么办？

#### 8. 现在需要设计一个开发平台，即提供接口给合作伙伴用，你觉得需要考虑一些什么问题？

#### Ref:
凤凰架构：https://icyfenix.cn/  
极客时间：https://time.geekbang.org/column/article/668548
